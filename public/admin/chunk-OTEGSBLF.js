import{a as P}from"./chunk-X42UY3AB.js";import{a as pe}from"./chunk-O7WP6NWV.js";import{a as me}from"./chunk-2TO534EY.js";import"./chunk-RSPORLB7.js";import{Aa as Z,Cb as ne,Fb as M,G as t,H as v,J as z,K as x,Kb as ae,Lb as oe,M as m,O as r,Oa as T,P as i,Pa as J,Q as c,Sa as U,T as Y,U as I,Ua as Q,Va as X,Wa as $,Xa as ee,Ya as te,aa as G,ba as p,ca as d,da as g,e as q,ec as re,fa as k,ga as V,gc as _,ha as j,jc as H,kb as A,lb as C,lc as B,ma as s,na as l,nb as L,ob as ie,p as y,s as S,sc as se,t as N,ta as K,tc as le,x as b,y as h}from"./chunk-K77LY3FL.js";import"./chunk-B4AJQJMI.js";var ue=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=S({type:n,selectors:[["appointments"]],decls:1,vars:0,template:function(o,e){o&1&&c(0,"router-outlet")},dependencies:[J],encapsulation:2})}}return n})();var ce=(()=>{class n extends me{constructor(a,o,e){super(o),this.client=a,this.coreService=o,this.route=e,this.columns=[{key:"id",translation_key:"APPOINTMENT.FIELDS.ID.LABEL",column:{title:"",type:"string",filter:!1}},{key:"user",translation_key:"APPOINTMENT.FIELDS.USER.LABEL",column:{title:"",filter:!1,type:"string",valuePrepareFunction:u=>u.mobile_number}},{key:"vendor",translation_key:"APPOINTMENT.FIELDS.VENDOR.LABEL",column:{title:"",filter:!1,type:"string",valuePrepareFunction:u=>u.name}},{key:"date",translation_key:"APPOINTMENT.FIELDS.DATE.LABEL",column:{title:"",filter:!1,type:"string"}},{key:"status",translation_key:"APPOINTMENT.FIELDS.STATUS.LABEL",column:{title:"",filter:!1,type:"string"}}],this.editPageUrl="pages/appointments/edit"}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint())}static{this.\u0275fac=function(o){return new(o||n)(v(P),v(B),v(T))}}static{this.\u0275cmp=S({type:n,selectors:[["list"]],features:[z],decls:6,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"delete","edit","settings","source"]],template:function(o,e){o&1&&(r(0,"nb-card")(1,"nb-card-header"),p(2),s(3,"translate"),i(),r(4,"nb-card-body",0)(5,"angular2-smart-table",1),I("delete",function(E){return e.onDeleteConfirm(E)})("edit",function(E){return e.edit(E)}),i()()()),o&2&&(t(2),g(" ",l(3,4,"APPOINTMENT.LABELS.LIST")," "),t(2),m("nbSpinner",e.loading),t(),m("settings",e.settings)("source",e.source))},dependencies:[M,L,C,A,re,_],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}





`]})}}return n})();var O=class{};var F=class{};var w=class{};function be(n,R){if(n&1&&(r(0,"nb-option",16),p(1),i()),n&2){let a=R.$implicit;m("value",a),t(),g("",a," ")}}function he(n,R){if(n&1&&(r(0,"label",17),p(1),i()),n&2){let a=R.$implicit;t(),d(a)}}var W=(()=>{class n{constructor(a,o,e,u,E){this.client=a,this.coreService=o,this.route=e,this.categoryClient=u,this.appointment=new O,this.appointmentRequest=new F,this.appointmentError=new w,this.appointmentMeta=null,this.showProgress=!1,this.showProgressButton=!1,this.categories=[],this.appointmentStatusList=["pending","accepted","onway","ongoing","complete","cancelled","rejected"],this.editId=null}ngOnInit(){this.getEditData()}getEditData(){let a=this.route.snapshot.paramMap.get("id");a&&(this.editId=a,this.getDataById(a).subscribe())}getDataById(a){return this.showProgress=!0,this.client.show(a).pipe(q(o=>(this.showProgress=!1,this.appointment=o,this.appointmentRequest.status=this.appointment.status,this.appointmentMeta=this.appointment.meta,o)))}saveAppointment(){this.showProgressButton=!0;let a=new FormData;a.append("status",this.appointmentRequest.status),(this.editId?this.client.update(this.editId,a):null).subscribe(e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(H.SUCCESS,"Saved","Saved successfully!"),this.back()},e=>{if(this.showProgressButton=!1,this.coreService.toastService.showToast(H.DANGER,"Failed",e.error.message),e.error.errors){let u=e.error.errors;this.appointmentError.status=u?.status}})}back(){this.coreService.location.back()}parseFloat(a){return parseFloat(a)}static{this.\u0275fac=function(o){return new(o||n)(v(P),v(B),v(T),v(pe),v(Z))}}static{this.\u0275cmp=S({type:n,selectors:[["save"]],decls:109,vars:68,consts:[["form","ngForm"],["status","ngModel"],[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],[1,"form-group"],["readonly","","nbInput","","fullWidth","",3,"value"],[1,"col-md-6"],[1,"form-group","col-md-3"],["fullWidth","","name","status","id","status",2,"text-transform","capitalize",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","error text-danger",4,"ngFor","ngForOf"],[3,"metaChange","meta"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"],[3,"value"],[1,"error","text-danger"]],template:function(o,e){if(o&1){let u=Y();r(0,"div",2)(1,"div",3)(2,"nb-card")(3,"nb-card-body",4)(4,"form",5,0),I("ngSubmit",function(){return b(u),h(e.saveAppointment())}),r(6,"div",2)(7,"div",3)(8,"nb-card")(9,"nb-card-header"),p(10),s(11,"translate"),i(),r(12,"nb-card-body")(13,"div",6)(14,"label"),p(15),s(16,"translate"),i(),c(17,"input",7),i(),r(18,"div",2)(19,"div",8)(20,"div",6)(21,"label"),p(22),s(23,"translate"),i(),c(24,"input",7),i()(),r(25,"div",8)(26,"div",6)(27,"label"),p(28),s(29,"translate"),i(),c(30,"input",7),i()()()()()()(),r(31,"div",2)(32,"div",3)(33,"nb-card")(34,"nb-card-header"),p(35),s(36,"translate"),i(),r(37,"nb-card-body")(38,"div",6)(39,"label"),p(40),s(41,"translate"),i(),c(42,"input",7),i()()()()(),r(43,"div",2)(44,"div",3)(45,"nb-card")(46,"nb-card-header"),p(47),s(48,"translate"),i(),r(49,"nb-card-body")(50,"div",2)(51,"div",3)(52,"div",6)(53,"label"),p(54),s(55,"translate"),i(),c(56,"input",7),i(),r(57,"div",2)(58,"div",3)(59,"div",6)(60,"label"),p(61),s(62,"translate"),i(),c(63,"input",7),i()()()()()()()()(),r(64,"div",2)(65,"div",3)(66,"nb-card")(67,"nb-card-header"),p(68),s(69,"translate"),i(),r(70,"nb-card-body")(71,"div",2)(72,"div",8)(73,"div",6)(74,"label"),p(75),s(76,"translate"),i(),c(77,"input",7),i()(),r(78,"div",9)(79,"label"),p(80),s(81,"translate"),i(),c(82,"input",7),i(),r(83,"div",9)(84,"label"),p(85),s(86,"translate"),i(),c(87,"input",7),i()()()()()(),r(88,"div",6)(89,"label"),p(90),s(91,"translate"),i(),c(92,"input",7),i(),r(93,"div",6)(94,"label"),p(95),s(96,"translate"),i(),r(97,"nb-select",10,1),j("ngModelChange",function(f){return b(u),V(e.appointmentRequest.status,f)||(e.appointmentRequest.status=f),h(f)}),x(99,be,2,2,"nb-option",11),i(),x(100,he,2,1,"label",12),i(),r(101,"ngx-metaeditor",13),j("metaChange",function(f){return b(u),V(e.appointmentMeta,f)||(e.appointmentMeta=f),h(f)}),i(),r(102,"button",14),p(103),s(104,"translate"),i(),p(105," \xA0 "),r(106,"button",15),I("click",function(){return b(u),h(e.back())}),p(107),s(108,"translate"),i()()()()()()}if(o&2){let u=G(5);t(3),m("nbSpinner",e.showProgress),t(7),d(l(11,34,"APPOINTMENT.FIELDS.USER.HEADER")),t(5),d(l(16,36,"APPOINTMENT.FIELDS.USER.MOBILE_NUMBER.LABEL")),t(2),m("value",e.appointment.user==null?null:e.appointment.user.mobile_number),t(5),d(l(23,38,"APPOINTMENT.FIELDS.USER.EMAIL.LABEL")),t(2),m("value",e.appointment.user==null?null:e.appointment.user.email),t(4),d(l(29,40,"APPOINTMENT.FIELDS.USER.NAME.LABEL")),t(2),m("value",e.appointment.user==null?null:e.appointment.user.name),t(5),d(l(36,42,"APPOINTMENT.FIELDS.VENDOR.HEADER")),t(5),d(l(41,44,"APPOINTMENT.FIELDS.VENDOR.NAME.LABEL")),t(2),m("value",e.appointment.vendor==null?null:e.appointment.vendor.name),t(5),d(l(48,46,"APPOINTMENT.FIELDS.SCHEDULE.HEADER")),t(7),d(l(55,48,"APPOINTMENT.FIELDS.DATE.LABEL")),t(2),m("value",e.appointment.date),t(5),d(l(62,50,"APPOINTMENT.FIELDS.TIME_FROM.LABEL")),t(2),m("value",e.appointment.time_from),t(5),d(l(69,52,"APPOINTMENT.FIELDS.PAYMENT.HEADER")),t(7),d(l(76,54,"APPOINTMENT.FIELDS.AMOUNT.LABEL")),t(2),m("value",e.appointment.amount),t(3),d(l(81,56,"APPOINTMENT.FIELDS.PAYMENT_METHOD.LABEL")),t(2),m("value",e.appointment.payment==null||e.appointment.payment.payment_method==null?null:e.appointment.payment.payment_method.title),t(3),d(l(86,58,"APPOINTMENT.FIELDS.PAYMENT_STATUS.LABEL")),t(2),m("value",e.appointment.payment==null?null:e.appointment.payment.status),t(3),d(l(91,60,"APPOINTMENT.FIELDS.CREATED_AT.LABEL")),t(2),m("value",e.appointment.created_at),t(3),d(l(96,62,"APPOINTMENT.FIELDS.STATUS.LABEL")),t(2),k("ngModel",e.appointmentRequest.status),t(2),m("ngForOf",e.appointmentStatusList),t(),m("ngForOf",e.appointmentError.status),t(),k("meta",e.appointmentMeta),t(),m("disabled",!u.form.valid||e.showProgressButton)("nbSpinner",e.showProgressButton),t(),g(" ",l(104,64,"COMMON.SAVE")," "),t(4),g(" ",l(108,66,"COMMON.BACK")," ")}},dependencies:[K,te,Q,X,ee,$,ie,oe,ae,M,L,C,A,ne,se,_],encapsulation:2})}}return n})();var Ie=[{path:"",component:ue,children:[{path:"add",component:W},{path:"list",component:ce},{path:"edit/:id",component:W}]}],ve=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=y({imports:[U.forChild(Ie),U]})}}return n})();var Ke=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=y({imports:[le,ve]})}}return n})();export{Ke as AppointmentsModule};
