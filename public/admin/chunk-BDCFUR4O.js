import{a as A}from"./chunk-7L6Q5TMZ.js";import{a as oe}from"./chunk-HOUDY274.js";import{a as R}from"./chunk-2TO534EY.js";import"./chunk-RSPORLB7.js";import{$ as k,Cb as ae,Fb as T,G as r,H as p,J as B,M as l,O as s,Oa as P,P as o,Pa as Z,Q as u,Sa as Y,T as N,U as C,Va as $,Wa as J,Ya as X,Z as M,_ as w,aa as H,ba as m,ca as g,da as v,e as G,ec as x,gc as E,ib as ee,jc as Q,kb as F,l as z,lb as I,lc as S,ma as c,na as d,nb as y,ob as te,p as D,pc as se,qc as le,rc as pe,s as f,sc as me,t as O,tc as ce,vb as ie,wb as ne,x as b,xb as re,y as _}from"./chunk-K77LY3FL.js";import"./chunk-B4AJQJMI.js";var de=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=f({type:n,selectors:[["transactions"]],decls:1,vars:0,template:function(t,e){t&1&&u(0,"router-outlet")},dependencies:[Z],encapsulation:2})}}return n})();var Se=["ordersChart"],ue=(()=>{class n{constructor(i,t,e){this.dashboardClient=i,this.coreService=t,this.themeService=e,this.alive=!0,this.period="week",this.chartLegend=[],this.themeService.getJsTheme().pipe(z(()=>this.alive)).subscribe(a=>{let h=a.variables.orderProfitLegend;this.setLegendItems(h)})}ngOnInit(){this.getChartData(this.period)}setLegendItems(i){this.chartLegend=[{iconColor:i.firstItem,title:"Transactions"}]}setPeriodAndGetChartData(i){this.period!==i&&(this.period=i),this.getChartData(i)}getChartData(i){this.dashboardClient.transactionAnalytics(i).subscribe(t=>{this.chartPanelSummary=t.summary,this.ordersChartData=t.chart})}ngOnDestroy(){this.alive=!1}static{this.\u0275fac=function(t){return new(t||n)(p(oe),p(S),p(ee))}}static{this.\u0275cmp=f({type:n,selectors:[["ngx-transaction-analytics-charts"]],viewQuery:function(t,e){if(t&1&&M(Se,7),t&2){let a;w(a=k())&&(e.ordersChart=a.first)}},decls:8,vars:4,consts:[["ordersChart",""],["fullWidth",""],["tabTitle","Transactions"],[1,"chart-container"],[3,"summary"],[3,"periodChange","type","chartLegend"],[3,"ordersChartData"]],template:function(t,e){if(t&1){let a=N();s(0,"nb-card")(1,"nb-tabset",1)(2,"nb-tab",2)(3,"div",3),u(4,"ngx-chart-panel-summary",4),s(5,"ngx-chart-panel-header",5),C("periodChange",function(V){return b(a),_(e.setPeriodAndGetChartData(V))}),o(),u(6,"ngx-orders-chart",6,0),o()()()()}t&2&&(r(4),l("summary",e.chartPanelSummary),r(),l("type",e.period)("chartLegend",e.chartLegend),r(),l("ordersChartData",e.ordersChartData))},dependencies:[y,ne,ie,se,le,pe],styles:[`[_nghost-%COMP%]   nb-tabset[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   nb-tabset[_ngcontent-%COMP%]     ul{border-color:transparent;padding-bottom:1px}[_nghost-%COMP%]   nb-tabset[_ngcontent-%COMP%]     ul .tab-link{padding:1.25rem 2rem}[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{flex:1;padding:0 0 1.25rem}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   ngx-profit-chart[_ngcontent-%COMP%], [_nghost-%COMP%]   ngx-orders-chart[_ngcontent-%COMP%]{padding:0 1.25rem}





`]})}}return n})();var Ce=(()=>{class n extends R{constructor(i,t,e){super(t),this.client=i,this.coreService=t,this.route=e,this.columns=[{key:"user",translation_key:"TRANSACTION.FIELDS.USER.LABEL",column:{title:"",type:"string",filter:!1,valuePrepareFunction:a=>a.email}},{key:"type",translation_key:"TRANSACTION.FIELDS.TYPE.LABEL",column:{filter:!1,title:"",type:"string"}},{key:"meta",translation_key:"TRANSACTION.FIELDS.META.LABEL",column:{filter:!1,title:"",type:"string",valuePrepareFunction:a=>a?.description}},{key:"amount",translation_key:"TRANSACTION.FIELDS.AMOUNT.LABEL",column:{filter:!1,title:"",type:"string"}}],this.editPageUrl="pages/transactions/edit",this.actionSettings={actions:{columnTitle:"Action",position:"right",add:!1,edit:!1,delete:!1}}}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint()+"/transactions")}delete(i){super.delete(i)}static{this.\u0275fac=function(t){return new(t||n)(p(A),p(S),p(P))}}static{this.\u0275cmp=f({type:n,selectors:[["list"]],features:[B],decls:9,vars:6,consts:[[1,"row"],[1,"col-xxl-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"delete","edit","settings","source"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1),u(2,"ngx-transaction-analytics-charts"),o()(),s(3,"nb-card")(4,"nb-card-header"),m(5),c(6,"translate"),o(),s(7,"nb-card-body",2)(8,"angular2-smart-table",3),C("delete",function(h){return e.onDeleteConfirm(h)})("edit",function(h){return e.edit(h)}),o()()()),t&2&&(r(5),v(" ",d(6,4,"TRANSACTION.LABELS.LIST")," "),r(2),l("nbSpinner",e.loading),r(),l("settings",e.settings)("source",e.source))},dependencies:[T,y,I,F,x,ue,E],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}





`]})}}return n})();var ge=(()=>{class n extends R{constructor(i,t,e){super(t),this.client=i,this.coreService=t,this.route=e,this.columns=[{key:"user",translation_key:"PAYOUTS.FIELDS.USER.LABEL",column:{title:"",type:"string",filter:!1,valuePrepareFunction:a=>a.email}},{key:"amount",translation_key:"PAYOUTS.FIELDS.AMOUNT.LABEL",column:{filter:!1,title:"",type:"string"}},{key:"meta",translation_key:"PAYOUTS.FIELDS.IS_PAID.LABEL",column:{filter:!1,title:"",type:"string",valuePrepareFunction:a=>a?.is_paid&&a.is_paid=="1"?"YES":"NO"}}],this.editPageUrl="pages/transactions/payouts/edit",this.actionSettings={actions:{columnTitle:"Action",position:"right",add:!1,edit:!0,delete:!1}}}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint()+"/transactions?type=payout")}delete(i){super.delete(i)}static{this.\u0275fac=function(t){return new(t||n)(p(A),p(S),p(P))}}static{this.\u0275cmp=f({type:n,selectors:[["list"]],features:[B],decls:6,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"delete","edit","settings","source"]],template:function(t,e){t&1&&(s(0,"nb-card")(1,"nb-card-header"),m(2),c(3,"translate"),o(),s(4,"nb-card-body",0)(5,"angular2-smart-table",1),C("delete",function(h){return e.onDeleteConfirm(h)})("edit",function(h){return e.edit(h)}),o()()()),t&2&&(r(2),v(" ",d(3,4,"PAYOUTS.LABELS.LIST")," "),r(2),l("nbSpinner",e.loading),r(),l("settings",e.settings)("source",e.source))},dependencies:[T,y,I,F,x,E],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}





`]})}}return n})();var U=class{};var j=class{constructor(){this.is_paid=!1}};var ve=(()=>{class n{constructor(i,t,e){this.client=i,this.coreService=t,this.route=e,this.transaction=new U,this.transactionRequest=new j,this.showProgress=!1,this.showProgressButton=!1,this.isEdit=!1,this.editId=null}ngOnInit(){this.getEditData()}ngAfterViewInit(){}getEditData(){let i=this.route.snapshot.paramMap.get("id");i&&(this.isEdit=!0,this.editId=i,this.getDataById(i).subscribe())}getDataById(i){return this.showProgress=!0,this.client.show(i).pipe(G(t=>(this.showProgress=!1,this.transaction=t,this.transactionRequest.is_paid=this.transaction.meta.is_paid,t)))}saveTransaction(){this.showProgressButton=!0;let i=new FormData;i.append("is_paid",this.transactionRequest.is_paid?"1":"0"),this.client.update(this.editId,i).subscribe(e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(Q.SUCCESS,"Saved","Saved successfully!"),this.back()},e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(Q.DANGER,"Failed",e.error.message)})}onIsPaidChange(i){this.transactionRequest.is_paid=i}back(){this.coreService.location.back()}static{this.\u0275fac=function(t){return new(t||n)(p(A),p(S),p(P))}}static{this.\u0275cmp=f({type:n,selectors:[["save"]],viewQuery:function(t,e){if(t&1&&M(me,5),t&2){let a;w(a=k())&&(e.metaeditorComponent=a.first)}},decls:50,vars:40,consts:[["form","ngForm"],[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],[1,"form-group"],["type","text","nbInput","","fullWidth","","readonly","",3,"value"],["name","is_paid","nbInput","","fullWidth","",1,"form-control",3,"checkedChange","checked"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"]],template:function(t,e){if(t&1){let a=N();s(0,"div",1)(1,"div",2)(2,"nb-card")(3,"nb-card-body",3)(4,"form",4,0),C("ngSubmit",function(){return b(a),_(e.saveTransaction())}),s(6,"div",5)(7,"label"),m(8),c(9,"translate"),o(),u(10,"input",6),o(),s(11,"div",5)(12,"label"),m(13),c(14,"translate"),o(),u(15,"input",6),o(),s(16,"div",5)(17,"label"),m(18),c(19,"translate"),o(),u(20,"input",6),o(),s(21,"div",5)(22,"label"),m(23),c(24,"translate"),o(),u(25,"input",6),o(),s(26,"div",5)(27,"label"),m(28),c(29,"translate"),o(),u(30,"input",6),o(),s(31,"div",5)(32,"label"),m(33),c(34,"translate"),o(),u(35,"input",6),o(),s(36,"div",5)(37,"label"),m(38),c(39,"translate"),o(),s(40,"nb-checkbox",7),C("checkedChange",function(V){return b(a),_(e.onIsPaidChange(V))}),m(41),c(42,"translate"),o()(),s(43,"button",8),m(44),c(45,"translate"),o(),m(46," \xA0 "),s(47,"button",9),C("click",function(){return b(a),_(e.back())}),m(48),c(49,"translate"),o()()()()()()}if(t&2){let a=H(5);r(3),l("nbSpinner",e.showProgress),r(5),g(d(9,20,"PAYOUTS.FIELDS.USER.LABEL")),r(2),l("value",e.transaction==null||e.transaction.user==null?null:e.transaction.user.email),r(3),g(d(14,22,"PAYOUTS.FIELDS.AMOUNT.LABEL")),r(2),l("value",e.transaction==null?null:e.transaction.amount),r(3),g(d(19,24,"PAYOUTS.FIELDS.BANK_NAME.LABEL")),r(2),l("value",e.transaction==null||e.transaction.meta==null?null:e.transaction.meta.bank_name),r(3),g(d(24,26,"PAYOUTS.FIELDS.BANK_ACCOUNT_NAME.LABEL")),r(2),l("value",e.transaction==null||e.transaction.meta==null?null:e.transaction.meta.bank_account_name),r(3),g(d(29,28,"PAYOUTS.FIELDS.BANK_ACCOUNT_NUMBER.LABEL")),r(2),l("value",e.transaction==null||e.transaction.meta==null?null:e.transaction.meta.bank_account_number),r(3),g(d(34,30,"PAYOUTS.FIELDS.BANK_CODE.LABEL")),r(2),l("value",e.transaction==null||e.transaction.meta==null?null:e.transaction.meta.bank_code),r(3),g(d(39,32,"PAYOUTS.FIELDS.IS_PAID.LABEL")),r(2),l("checked",e.transactionRequest.is_paid),r(),v("",d(42,34,"PAYOUTS.FIELDS.IS_PAID.LABEL"),"?"),r(2),l("disabled",!a.form.valid||e.showProgressButton)("nbSpinner",e.showProgressButton),r(),v(" ",d(45,36,"COMMON.SAVE")," "),r(4),v(" ",d(49,38,"COMMON.BACK")," ")}},dependencies:[X,$,J,te,T,y,I,re,ae,E],encapsulation:2})}}return n})();var Pe=[{path:"",component:de,children:[{path:"list",component:Ce},{path:"payouts/list",component:ge},{path:"payouts/edit/:id",component:ve}]}],ye=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=O({type:n})}static{this.\u0275inj=D({imports:[Y.forChild(Pe),Y]})}}return n})();var et=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=O({type:n})}static{this.\u0275inj=D({imports:[ce,ye]})}}return n})();export{et as TransactionsModule};
