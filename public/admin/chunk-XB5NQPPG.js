import{a as B}from"./chunk-YT3MIBH3.js";import{a as be}from"./chunk-2TO534EY.js";import"./chunk-RSPORLB7.js";import{Cb as de,Fb as x,G as n,H as f,J as U,Jb as ce,K as y,Kb as ue,Lb as he,M as l,O as a,Oa as w,P as o,Pa as Z,Q as _,Sa as W,T as z,Ta as Q,U as C,Ua as X,V as $,Va as ee,Wa as te,Xa as ie,Y as J,Ya as ne,_a as oe,aa as G,ab as re,ba as s,bb as ae,ca as g,cb as se,da as b,e as j,ec as ge,fa as I,ga as N,gc as A,ha as L,jb as le,jc as H,kb as D,lb as F,lc as O,ma as c,na as u,nb as P,nc as fe,ob as me,p as M,s as E,t as T,ta as K,tc as ye,x as v,xb as pe,y as S}from"./chunk-K77LY3FL.js";import"./chunk-B4AJQJMI.js";var Se=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=E({type:e,selectors:[["paymentmethods"]],decls:1,vars:0,template:function(r,i){r&1&&_(0,"router-outlet")},dependencies:[Z],encapsulation:2})}}return e})();var Ee=(()=>{class e extends be{constructor(t,r,i){super(r),this.client=t,this.coreService=r,this.route=i,this.columns=[{key:"title",translation_key:"PAYMENTMETHOD.FIELDS.TITLE.LABEL",column:{title:"",type:"string"}},{key:"slug",translation_key:"PAYMENTMETHOD.FIELDS.SLUG.LABEL",column:{title:"",type:"string"}}],this.editPageUrl="pages/paymentmethods/edit",this.actionSettings={actions:{columnTitle:"Action",position:"right",add:!1}}}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint())}static{this.\u0275fac=function(r){return new(r||e)(f(B),f(O),f(w))}}static{this.\u0275cmp=E({type:e,selectors:[["list"]],features:[U],decls:6,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"delete","edit","settings","source"]],template:function(r,i){r&1&&(a(0,"nb-card")(1,"nb-card-header"),s(2),c(3,"translate"),o(),a(4,"nb-card-body",0)(5,"angular2-smart-table",1),C("delete",function(h){return i.onDeleteConfirm(h)})("edit",function(h){return i.edit(h)}),o()()()),r&2&&(n(2),b(" ",u(3,4,"PAYMENTMETHOD.LABELS.LIST")," "),n(2),l("nbSpinner",i.loading),n(),l("settings",i.settings)("source",i.source))},dependencies:[x,P,F,D,ge,A],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}





`]})}}return e})();var q=class{};var k=class{constructor(){this.enabled=!1}};var V=class{};function Ne(e,p){if(e&1&&(a(0,"div",12)(1,"label"),s(2),c(3,"translate"),a(4,"span",22),s(5),c(6,"languageTitle"),o()(),_(7,"input",23),o()),e&2){let t=p.index,r=$();n(2),b("",u(3,3,"PAYMENTMETHOD.FIELDS.TITLE.LABEL")," "),n(3),g(u(6,5,r.languages[t])),n(2),J("formControlName",t)}}function Le(e,p){if(e&1&&(a(0,"label",24),s(1),o()),e&2){let t=p.$implicit;n(),g(t)}}function we(e,p){if(e&1&&(a(0,"label",24),s(1),o()),e&2){let t=p.$implicit;n(),g(t)}}function De(e,p){if(e&1&&(a(0,"label",24),s(1),o()),e&2){let t=p.$implicit;n(),g(t)}}function Fe(e,p){if(e&1&&(a(0,"label",24),s(1),o()),e&2){let t=p.$implicit;n(),g(t)}}function Pe(e,p){if(e&1&&(a(0,"nb-option",25),s(1),o()),e&2){let t=p.$implicit;l("value",t),n(),b("",t," ")}}function xe(e,p){if(e&1&&(a(0,"label",24),s(1),o()),e&2){let t=p.$implicit;n(),g(t)}}var Y=(()=>{class e{constructor(t,r,i){this.client=t,this.coreService=r,this.route=i,this.paymentmethod=new q,this.paymentmethodRequest=new k,this.paymentmethodError=new V,this.showProgress=!1,this.showProgressButton=!1,this.typeList=["postpaid","prepaid"],this.editId=null,this.languages=[],this.languages=r.translationService.languages}ngOnInit(){this.titleGroupForm=this.coreService.translationService.buildFormGroup(null),this.getEditData()}getEditData(){let t=this.route.snapshot.paramMap.get("id");t&&(this.editId=t,this.getDataById(t).subscribe())}getDataById(t){return this.showProgress=!0,this.client.show(t).pipe(j(r=>(this.showProgress=!1,this.paymentmethod=r,this.titleGroupForm=this.coreService.translationService.buildFormGroup(this.paymentmethod.title_translations),this.paymentmethodRequest.slug=this.paymentmethod.slug,this.paymentmethodRequest.meta=this.paymentmethod.meta,this.paymentmethodRequest.type=this.paymentmethod.type,this.paymentmethodRequest.enabled=this.paymentmethod.enabled,r)))}savePaymentmethod(){this.showProgressButton=!0;let t=new FormData;t.append("title_translations",this.coreService.translationService.buildRequestParam(this.titleGroupForm)),t.append("slug",this.paymentmethodRequest.slug),t.append("meta",JSON.stringify(this.paymentmethodRequest.meta)),t.append("enabled",this.paymentmethodRequest.enabled?"1":"0"),t.append("type",String(this.paymentmethodRequest.type)),(this.editId?this.client.update(this.editId,t):this.client.store(t)).subscribe(i=>{this.showProgressButton=!1,this.coreService.toastService.showToast(H.SUCCESS,"Saved","Saved successfully!"),this.back()},i=>{if(this.showProgressButton=!1,this.coreService.toastService.showToast(H.DANGER,"Failed",i.error.message),i.error.errors){let m=i.error.errors;this.paymentmethodError.title_translations=m?.title_translations,this.paymentmethodError.slug=m?.slug,this.paymentmethodError.meta=m?.meta}})}back(){this.coreService.location.back()}getTitleItems(){return this.titleGroupForm.get("items")}onEnabledChange(t){this.paymentmethodRequest.enabled=t}static{this.\u0275fac=function(r){return new(r||e)(f(B),f(O),f(w))}}static{this.\u0275cmp=E({type:e,selectors:[["save"]],decls:58,vars:40,consts:[["form","ngForm"],["slug","ngModel"],["meta","ngModel"],["status","ngModel"],[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],[3,"formGroup"],["formArrayName","items"],["class","form-group",4,"ngFor","ngForOf"],["class","error text-danger",4,"ngFor","ngForOf"],[1,"form-group"],["icon","info-outline","nbTooltip","Must be unique, all small letter, no space. Example - test-cod","nbTooltipStatus","info","status","info"],["type","text","nbInput","","fullWidth","","placeholder","Slug","name","slug","required","",3,"ngModelChange","ngModel"],[1,"error","text-danger",3,"hidden"],["nbInput","","fullWidth","","placeholder","Meta","name","meta",3,"ngModelChange","ngModel"],["name","enabled","nbInput","","fullWidth","",1,"form-control",3,"checkedChange","checked"],["fullWidth","","name","type","id","type",2,"text-transform","capitalize",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"],[1,"language-label"],["type","text","nbInput","","fullWidth","","required","",3,"formControlName"],[1,"error","text-danger"],[3,"value"]],template:function(r,i){if(r&1){let m=z();a(0,"div",4)(1,"div",5)(2,"nb-card")(3,"nb-card-body",6)(4,"form",7,0),C("ngSubmit",function(){return v(m),S(i.savePaymentmethod())}),a(6,"div",4)(7,"div",5)(8,"nb-card")(9,"nb-card-header"),s(10),c(11,"translate"),o(),a(12,"nb-card-body")(13,"div",8)(14,"div",9),y(15,Ne,8,7,"div",10),o()(),y(16,Le,2,1,"label",11),o()()()(),a(17,"div",12)(18,"label"),s(19),c(20,"translate"),o(),s(21," \xA0"),_(22,"nb-icon",13),a(23,"input",14,1),L("ngModelChange",function(d){return v(m),N(i.paymentmethodRequest.slug,d)||(i.paymentmethodRequest.slug=d),S(d)}),o(),a(25,"label",15),s(26),c(27,"translate"),o(),y(28,we,2,1,"label",11),o(),a(29,"div",12)(30,"label"),s(31),c(32,"translate"),o(),a(33,"textarea",16,2),L("ngModelChange",function(d){return v(m),N(i.paymentmethodRequest.meta,d)||(i.paymentmethodRequest.meta=d),S(d)}),o(),y(35,De,2,1,"label",11),o(),a(36,"div",12)(37,"label"),s(38),c(39,"translate"),o(),a(40,"nb-checkbox",17),C("checkedChange",function(d){return v(m),S(i.onEnabledChange(d))}),s(41,"Enabled?"),o(),y(42,Fe,2,1,"label",11),o(),a(43,"div",12)(44,"label"),s(45),c(46,"translate"),o(),a(47,"nb-select",18,3),L("ngModelChange",function(d){return v(m),N(i.paymentmethodRequest.type,d)||(i.paymentmethodRequest.type=d),S(d)}),y(49,Pe,2,2,"nb-option",19),o(),y(50,xe,2,1,"label",11),o(),a(51,"button",20),s(52),c(53,"translate"),o(),s(54," \xA0 "),a(55,"button",21),C("click",function(){return v(m),S(i.back())}),s(56),c(57,"translate"),o()()()()()()}if(r&2){let m=G(5),h=G(24);n(3),l("nbSpinner",i.showProgress),n(7),g(u(11,24,"PAYMENTMETHOD.FIELDS.TITLE.HEADER")),n(3),l("formGroup",i.titleGroupForm),n(2),l("ngForOf",i.getTitleItems().controls),n(),l("ngForOf",i.paymentmethodError.title_translations),n(3),g(u(20,26,"PAYMENTMETHOD.FIELDS.SLUG.LABEL")),n(4),I("ngModel",i.paymentmethodRequest.slug),n(2),l("hidden",h.valid||h.pristine),n(),b(" ",u(27,28,"PAYMENTMETHOD.FIELDS.SLUG.VALIDATION")," "),n(2),l("ngForOf",i.paymentmethodError.slug),n(3),g(u(32,30,"PAYMENTMETHOD.FIELDS.META.LABEL")),n(2),I("ngModel",i.paymentmethodRequest.meta),n(2),l("ngForOf",i.paymentmethodError.meta),n(3),g(u(39,32,"PAYMENTMETHOD.FIELDS.ENABLED.LABEL")),n(2),l("checked",i.paymentmethodRequest.enabled),n(2),l("ngForOf",i.paymentmethodError.enabled),n(3),g(u(46,34,"PAYMENTMETHOD.FIELDS.TYPE.LABEL")),n(2),I("ngModel",i.paymentmethodRequest.type),n(2),l("ngForOf",i.typeList),n(),l("ngForOf",i.paymentmethodError.type),n(),l("disabled",!m.form.valid||i.showProgressButton)("nbSpinner",i.showProgressButton),n(),b(" ",u(53,36,"COMMON.SAVE")," "),n(4),b(" ",u(57,38,"COMMON.BACK")," ")}},dependencies:[K,ne,Q,X,ee,se,ie,te,oe,ae,re,me,he,ue,le,x,P,F,D,pe,ce,de,A,fe],styles:[`textarea[_ngcontent-%COMP%]{height:200px}





`]})}}return e})();var Be=[{path:"",component:Se,children:[{path:"add",component:Y},{path:"list",component:Ee},{path:"edit/:id",component:Y}]}],Ce=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=M({imports:[W.forChild(Be),W]})}}return e})();var rt=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=M({imports:[ye,Ce]})}}return e})();export{rt as PaymentmethodsModule};
