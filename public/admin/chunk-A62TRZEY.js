import{Ab as re,Bb as ae,Cb as le,Db as se,G as r,H as c,J as F,K as u,Kb as ge,L as w,Lb as me,M as s,N as B,O as o,Ob as de,P as n,Pb as pe,Qa as U,Qb as ue,R as L,Rb as ce,S as I,Sa as y,Sb as fe,T as E,Ta as z,Tb as _e,U as P,Ua as H,Ub as he,V as f,Va as G,Wa as J,Xa as K,Ya as Q,aa as b,ac as be,ba as g,ca as N,cb as X,db as Y,ea as j,eb as Z,fa as C,fb as $,ga as x,ha as v,hb as ee,lc as Ce,ma as T,na as V,nc as xe,ob as te,p as M,pb as ie,qa as O,s as W,t as S,ta as k,tc as ve,ua as D,va as q,wa as R,x as _,xb as ne,y as h,yb as oe}from"./chunk-K77LY3FL.js";import"./chunk-B4AJQJMI.js";function we(e,m){if(e&1&&(o(0,"li",25),g(1),n()),e&2){let t=m.$implicit;r(),N(t)}}function Le(e,m){if(e&1&&(o(0,"nb-alert",21)(1,"p",22)(2,"b"),g(3,"Oh snap!"),n()(),o(4,"ul",23),u(5,we,2,1,"li",24),n()()),e&2){let t=f();r(5),s("ngForOf",t.errors)}}function Ie(e,m){if(e&1&&(o(0,"li",25),g(1),n()),e&2){let t=m.$implicit;r(),N(t)}}function Ee(e,m){if(e&1&&(o(0,"nb-alert",26)(1,"p",22)(2,"b"),g(3,"Hooray!"),n()(),o(4,"ul",23),u(5,Ie,2,1,"li",24),n()()),e&2){let t=f();r(5),s("ngForOf",t.messages)}}function Te(e,m){e&1&&(o(0,"p",28),g(1," Email is required! "),n())}function Ve(e,m){e&1&&(o(0,"p",28),g(1," Email should be the real one! "),n())}function Ae(e,m){if(e&1&&(L(0),u(1,Te,2,0,"p",27)(2,Ve,2,0,"p",27),I()),e&2){f();let t=b(12);r(),s("ngIf",t.errors==null?null:t.errors.required),r(),s("ngIf",t.errors==null?null:t.errors.pattern)}}function We(e,m){e&1&&(o(0,"p",28),g(1," Password is required! "),n())}function Fe(e,m){if(e&1&&(o(0,"p",28),g(1),n()),e&2){let t=f(2);r(),j(" Password should contain from ",t.getConfigValue("forms.validation.password.minLength")," to ",t.getConfigValue("forms.validation.password.maxLength")," characters ")}}function Be(e,m){if(e&1&&(L(0),u(1,We,2,0,"p",27)(2,Fe,2,2,"p",27),I()),e&2){f();let t=b(19);r(),s("ngIf",t.errors==null?null:t.errors.required),r(),s("ngIf",(t.errors==null?null:t.errors.minlength)||(t.errors==null?null:t.errors.maxlength))}}function Pe(e,m){if(e&1&&(o(0,"nb-option",29),g(1),T(2,"languageTitle"),n()),e&2){let t=m.$implicit;s("value",t),r(),N(V(2,2,t))}}function je(e,m){if(e&1){let t=E();o(0,"nb-checkbox",30),v("ngModelChange",function(i){_(t);let p=f();return x(p.user.rememberMe,i)||(p.user.rememberMe=i),h(i)}),g(1,"Remember me"),n()}if(e&2){let t=f();C("ngModel",t.user.rememberMe)}}var A=class{constructor(){this.selectedLanguage="en"}},Me=(()=>{class e extends _e{constructor(t,l,i,p,d,a,Ne){super(t,l,i,p),this.options=l,this.coreService=Ne,this.languages=null,this.language=new A,a.setOptions({name:"email",token:{class:pe,key:"token"},baseEndpoint:d.getConfig().apiBaseUrl,login:{endpoint:"/login"}}),d.getConfig().apiBaseUrl.indexOf("vtlabs.dev")>-1&&(this.user.email="admin@example.com",this.user.password="admin"),this.languages=this.coreService.translationService.languagesSubject$,this.coreService.translationService.defaultLanguageAndDirectionSetup()}ngOnInit(){if(this.service.isAuthenticated())return this.router.navigateByUrl("/")}login(){let t=this;this.errors=[],this.messages=[],this.submitted=!0,this.service.authenticate(this.strategy,this.user).subscribe(function(l){t.submitted=!1,l.isSuccess()?(t.messages=l.getMessages(),l.getResponse().body.store_id&&localStorage.setItem("store_id",l.getResponse().body.store_id),localStorage.setItem("selected_language",t.language.selectedLanguage)):t.errors=l.getErrors();let i=l.getRedirect();i&&setTimeout(function(){return t.coreService.translationService.languageAndDirectionSetup(),t.router.navigateByUrl(i)},t.redirectDelay),t.cd.detectChanges()})}static{this.\u0275fac=function(l){return new(l||e)(c(ue),c(de),c(O),c(U),c(be),c(ce),c(Ce))}}static{this.\u0275cmp=W({type:e,selectors:[["ngx-login"]],features:[F],decls:32,vars:22,consts:[["form","ngForm"],["email","ngModel"],["password","ngModel"],["selectedLanguage","ngModel"],["id","title",1,"title"],[1,"sub-title"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","title",3,"ngSubmit"],[1,"form-control-group"],[1,"label"],["nbInput","","fullWidth","","name","email","id","input-email","pattern",".+@.+\\..+","placeholder","Email address","fieldSize","large","autofocus","",3,"ngModelChange","ngModel","status","required"],[4,"ngIf"],[1,"label-with-link"],["nbInput","","fullWidth","","name","password","type","password","id","input-password","placeholder","Password","fieldSize","large",3,"ngModelChange","ngModel","status","required","minlength","maxlength"],["for","selectedLanguage"],["fullWidth","","name","selectedLanguage","id","selectedLanguage",2,"text-transform","capitalize",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control-group","accept-group"],["name","rememberMe",3,"ngModel","ngModelChange",4,"ngIf"],["nbButton","","fullWidth","","status","primary","size","large",3,"disabled"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"value"],["name","rememberMe",3,"ngModelChange","ngModel"]],template:function(l,i){if(l&1){let p=E();o(0,"h1",4),g(1,"Login"),n(),o(2,"p",5),g(3,"Hello! Log in with your email."),n(),u(4,Le,6,1,"nb-alert",6)(5,Ee,6,1,"nb-alert",7),o(6,"form",8,0),P("ngSubmit",function(){return _(p),h(i.login())}),o(8,"div",9)(9,"label",10),g(10,"Email address:"),n(),o(11,"input",11,1),v("ngModelChange",function(a){return _(p),x(i.user.email,a)||(i.user.email=a),h(a)}),n(),u(13,Ae,3,2,"ng-container",12),n(),o(14,"div",9)(15,"span",13)(16,"label",10),g(17,"Password:"),n()(),o(18,"input",14,2),v("ngModelChange",function(a){return _(p),x(i.user.password,a)||(i.user.password=a),h(a)}),n(),u(20,Be,3,2,"ng-container",12),n(),o(21,"div",9)(22,"label",15),g(23,"Language"),n(),o(24,"nb-select",16,3),v("ngModelChange",function(a){return _(p),x(i.language.selectedLanguage,a)||(i.language.selectedLanguage=a),h(a)}),u(26,Pe,3,4,"nb-option",17),T(27,"async"),n()(),o(28,"div",18),u(29,je,2,1,"nb-checkbox",19),n(),o(30,"button",20),g(31," Log In "),n()()}if(l&2){let p=b(7),d=b(12),a=b(19);r(4),s("ngIf",i.showMessages.error&&(i.errors==null?null:i.errors.length)&&!i.submitted),r(),s("ngIf",i.showMessages.success&&(i.messages==null?null:i.messages.length)&&!i.submitted),r(6),C("ngModel",i.user.email),s("status",d.dirty?d.invalid?"danger":"success":"basic")("required",i.getConfigValue("forms.validation.email.required")),w("aria-invalid",d.invalid&&d.touched?!0:null),r(2),s("ngIf",d.invalid&&d.touched),r(5),C("ngModel",i.user.password),s("status",a.dirty?a.invalid?"danger":"success":"basic")("required",i.getConfigValue("forms.validation.password.required"))("minlength",i.getConfigValue("forms.validation.password.minLength"))("maxlength",i.getConfigValue("forms.validation.password.maxLength")),w("aria-invalid",a.invalid&&a.touched?!0:null),r(2),s("ngIf",a.invalid&&a.touched),r(4),C("ngModel",i.language.selectedLanguage),r(2),s("ngForOf",V(27,20,i.languages)),r(3),s("ngIf",i.rememberMe),r(),B("btn-pulse",i.submitted),s("disabled",i.submitted||!p.valid)}},dependencies:[k,D,Q,z,H,G,X,Y,Z,$,K,J,re,le,te,ne,me,ge,q,xe],encapsulation:2,changeDetection:0})}}return e})();var Oe=[{path:"",component:fe,children:[{path:"login",component:Me}]}],Se=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=M({imports:[y.forChild(Oe),y]})}}return e})();var gt=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=M({imports:[R,ee,y,ae,se,ie,oe,Se,he,ve]})}}return e})();export{gt as NgxAuthModule};
