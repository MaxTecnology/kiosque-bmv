import{a as he}from"./chunk-2A4U5TWR.js";import{a as T}from"./chunk-23IKH7ID.js";import{a as ge}from"./chunk-2TO534EY.js";import"./chunk-RSPORLB7.js";import{$ as ee,Cb as ve,F as J,Fb as N,G as n,H as b,J as K,K as h,M as d,O as a,Oa as M,P as r,Pa as ne,Q as Z,Sa as G,T as j,Ta as re,U as E,Ua as oe,V as L,Va as ae,Wa as le,Xa as se,Ya as de,Z as X,Za as pe,_ as $,aa as S,ba as s,ca as p,cb as me,da as y,e as H,ec as fe,fa as I,ga as C,gc as A,ha as w,jc as z,kb as B,lb as q,lc as O,ma as m,na as u,nb as V,ob as ue,p as x,s as R,sc as F,t as D,ta as te,tc as _e,ua as ie,x as _,xb as ce,y as g}from"./chunk-K77LY3FL.js";import"./chunk-B4AJQJMI.js";var be=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=R({type:i,selectors:[["deliveries"]],decls:1,vars:0,template:function(l,t){l&1&&Z(0,"router-outlet")},dependencies:[ne],encapsulation:2})}}return i})();var Ee=(()=>{class i extends ge{constructor(e,l,t){super(l),this.client=e,this.coreService=l,this.route=t,this.columns=[{key:"user",translation_key:"DELIVERY.FIELDS.USER.LABEL",column:{title:"",type:"string",valuePrepareFunction:o=>o?.mobile_number}},{key:"is_online",translation_key:"DELIVERY.FIELDS.IS_ONLINE.LABEL",column:{title:"",type:"string",filter:!1}},{key:"assigned",translation_key:"DELIVERY.FIELDS.ASSIGNED.LABEL",column:{title:"",type:"string",filter:!1}}],this.editPageUrl="pages/deliveries/edit"}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint())}static{this.\u0275fac=function(l){return new(l||i)(b(T),b(O),b(M))}}static{this.\u0275cmp=R({type:i,selectors:[["list"]],features:[K],decls:6,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"delete","edit","settings","source"]],template:function(l,t){l&1&&(a(0,"nb-card")(1,"nb-card-header"),s(2),m(3,"translate"),r(),a(4,"nb-card-body",0)(5,"angular2-smart-table",1),E("delete",function(f){return t.onDeleteConfirm(f)})("edit",function(f){return t.edit(f)}),r()()()),l&2&&(n(2),y(" ",u(3,4,"DELIVERY.LABELS.LIST")," "),n(2),d("nbSpinner",t.loading),n(),d("settings",t.settings)("source",t.source))},dependencies:[N,V,q,B,fe,A],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}





`]})}}return i})();var W=class{};var P=class extends he{constructor(){super(...arguments),this.assigned=!1,this.is_online=!1,this.is_verified=!1,this.meta={}}};var U=class{};var Y=class extends U{};function Le(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function xe(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function De(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function Me(i,v){if(i&1){let e=j();a(0,"div",6)(1,"div",7)(2,"nb-card")(3,"nb-card-header"),s(4),m(5,"translate"),r(),a(6,"nb-card-body")(7,"div",11)(8,"label"),s(9),m(10,"translate"),r(),a(11,"input",23,3),w("ngModelChange",function(t){_(e);let o=L();return C(o.deliveryRequest.email,t)||(o.deliveryRequest.email=t),g(t)}),r(),a(13,"label",18),s(14),m(15,"translate"),r(),h(16,Le,2,1,"label",13),r(),a(17,"div",11)(18,"label"),s(19),m(20,"translate"),r(),a(21,"input",24,4),w("ngModelChange",function(t){_(e);let o=L();return C(o.deliveryRequest.mobile_number,t)||(o.deliveryRequest.mobile_number=t),g(t)}),r(),a(23,"label",18),s(24),m(25,"translate"),r(),h(26,xe,2,1,"label",13),r(),a(27,"div",11)(28,"label"),s(29),m(30,"translate"),r(),a(31,"input",25,5),w("ngModelChange",function(t){_(e);let o=L();return C(o.deliveryRequest.password,t)||(o.deliveryRequest.password=t),g(t)}),r(),a(33,"label",18),s(34),m(35,"translate"),r(),h(36,De,2,1,"label",13),r()()()()()}if(i&2){let e=S(12),l=S(22),t=S(32),o=L();n(4),p(u(5,16,"DELIVERY.FIELDS.USER.HEADER")),n(5),p(u(10,18,"USER.EMAIL.LABEL")),n(2),I("ngModel",o.deliveryRequest.email),n(2),d("hidden",e.valid||e.pristine),n(),y(" ",u(15,20,"USER.EMAIL.VALIDATION")," "),n(2),d("ngForOf",o.deliveryError.email),n(3),p(u(20,22,"USER.MOBILE_NUMBER.LABEL")),n(2),I("ngModel",o.deliveryRequest.mobile_number),n(2),d("hidden",l.valid||l.pristine),n(),y(" ",u(25,24,"USER.MOBILE_NUMBER.VALIDATION")," "),n(2),d("ngForOf",o.deliveryError.mobile_number),n(3),p(u(30,26,"USER.PASSWORD.LABEL")),n(2),I("ngModel",o.deliveryRequest.password),n(2),d("hidden",t.valid||t.pristine),n(),y(" ",u(35,28,"USER.PASSWORD.VALIDATION")," "),n(2),d("ngForOf",o.deliveryError.password)}}function Be(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function qe(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function Ve(i,v){if(i&1&&(a(0,"div")(1,"a",27),s(2),r()()),i&2){let e=L();n(),d("href",e.deliveryRequest.meta==null?null:e.deliveryRequest.meta.document_url,J),n(),p(e.deliveryRequest.meta==null?null:e.deliveryRequest.meta.document_url)}}function Ne(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function Te(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}function Ae(i,v){if(i&1&&(a(0,"label",26),s(1),r()),i&2){let e=v.$implicit;n(),p(e)}}var Q=(()=>{class i{constructor(e,l,t){this.client=e,this.coreService=l,this.route=t,this.delivery=new W,this.deliveryRequest=new P,this.deliveryError=new Y,this.showProgress=!1,this.showProgressButton=!1,this.categories=[],this.editId=null}ngOnInit(){this.getEditData()}getEditData(){let e=this.route.snapshot.paramMap.get("id");e&&(this.editId=e,this.getDataById(e).subscribe())}getDataById(e){return this.showProgress=!0,this.client.show(e).pipe(H(l=>(this.showProgress=!1,this.delivery=l,this.deliveryRequest.assigned=this.delivery.assigned,this.deliveryRequest.is_online=this.delivery.is_online,this.deliveryRequest.is_verified=this.delivery.is_verified,this.deliveryRequest.latitude=this.delivery.latitude,this.deliveryRequest.longitude=this.delivery.longitude,this.deliveryRequest.meta=this.delivery.meta,l)))}saveDelivery(){this.metaeditorComponent.updatedMetaProperty(),this.showProgressButton=!0;let e=new FormData;e.append("assigned",String(this.deliveryRequest.assigned)),e.append("is_online",String(this.deliveryRequest.is_online)),e.append("is_verified",this.deliveryRequest.is_verified?"1":"0"),e.append("latitude",this.deliveryRequest.latitude),e.append("longitude",this.deliveryRequest.longitude),e.append("meta",JSON.stringify(this.deliveryRequest.meta)),this.editId||(e.append("email",this.deliveryRequest.email),e.append("mobile_number",this.deliveryRequest.mobile_number),e.append("password",this.deliveryRequest.password)),(this.editId?this.client.update(this.editId,e):this.client.store(e)).subscribe(t=>{this.showProgressButton=!1,this.coreService.toastService.showToast(z.SUCCESS,"Saved","Saved successfully!"),this.back()},t=>{if(this.showProgressButton=!1,this.coreService.toastService.showToast(z.DANGER,"Failed",t.error.message),t.error.errors){let o=t.error.errors;this.deliveryError.longitude=o?.longitude,this.deliveryError.latitude=o?.latitude,this.deliveryError.assigned=o?.assigned,this.deliveryError.is_online=o?.is_online,this.deliveryError.is_verified=o?.is_verified,this.deliveryError.email=o?.email,this.deliveryError.mobile_number=o?.mobile_number,this.deliveryError.password=o?.password}})}back(){this.coreService.location.back()}onIsOnlineChange(e){this.deliveryRequest.is_online=e}onIsVerifiedChange(e){this.deliveryRequest.is_verified=e}static{this.\u0275fac=function(l){return new(l||i)(b(T),b(O),b(M))}}static{this.\u0275cmp=R({type:i,selectors:[["save"]],viewQuery:function(l,t){if(l&1&&X(F,5),l&2){let o;$(o=ee())&&(t.metaeditorComponent=o.first)}},decls:57,vars:45,consts:[["form","ngForm"],["latitude","ngModel"],["longitude","ngModel"],["email","ngModel"],["mobile_number","ngModel"],["password","ngModel"],[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],["class","row",4,"ngIf"],[1,"form-group"],["name","assigned","nbInput","","fullWidth","","disabled","",1,"form-control",3,"checked"],["class","error text-danger",4,"ngFor","ngForOf"],["name","is_online","nbInput","","fullWidth","",1,"form-control",3,"checkedChange","checked"],["name","is_verified","nbInput","","fullWidth","",1,"form-control",3,"checkedChange","checked"],[4,"ngIf"],["type","number","nbInput","","fullWidth","","placeholder","Latitude","name","latitude","required","",3,"ngModelChange","ngModel"],[1,"error","text-danger",3,"hidden"],["type","number","nbInput","","fullWidth","","placeholder","Longitude","name","longitude","required","",3,"ngModelChange","ngModel"],[3,"metaChange","meta"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"],["type","email","nbInput","","fullWidth","","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","mobile_number","nbInput","","fullWidth","","placeholder","Mobile Number","name","mobile_number","required","",3,"ngModelChange","ngModel"],["type","password","nbInput","","fullWidth","","id","password","placeholder","Password","name","password",3,"ngModelChange","ngModel"],[1,"error","text-danger"],["target","_blank",3,"href"]],template:function(l,t){if(l&1){let o=j();a(0,"div",6)(1,"div",7)(2,"nb-card")(3,"nb-card-body",8)(4,"form",9,0),E("ngSubmit",function(){return _(o),g(t.saveDelivery())}),h(6,Me,37,30,"div",10),a(7,"div",11)(8,"label"),s(9),m(10,"translate"),r(),a(11,"nb-checkbox",12),s(12," Assigned?"),r(),h(13,Be,2,1,"label",13),r(),a(14,"div",11)(15,"label"),s(16),m(17,"translate"),r(),a(18,"nb-checkbox",14),E("checkedChange",function(c){return _(o),g(t.onIsOnlineChange(c))}),s(19,"Is Online?"),r(),h(20,qe,2,1,"label",13),r(),a(21,"div",11)(22,"label"),s(23),m(24,"translate"),r(),a(25,"nb-checkbox",15),E("checkedChange",function(c){return _(o),g(t.onIsVerifiedChange(c))}),s(26,"Is Verified?"),r(),h(27,Ve,3,2,"div",16)(28,Ne,2,1,"label",13),r(),a(29,"div",11)(30,"label"),s(31),m(32,"translate"),r(),a(33,"input",17,1),w("ngModelChange",function(c){return _(o),C(t.deliveryRequest.latitude,c)||(t.deliveryRequest.latitude=c),g(c)}),r(),a(35,"label",18),s(36),m(37,"translate"),r(),h(38,Te,2,1,"label",13),r(),a(39,"div",11)(40,"label"),s(41),m(42,"translate"),r(),a(43,"input",19,2),w("ngModelChange",function(c){return _(o),C(t.deliveryRequest.longitude,c)||(t.deliveryRequest.longitude=c),g(c)}),r(),a(45,"label",18),s(46),m(47,"translate"),r(),h(48,Ae,2,1,"label",13),r(),a(49,"ngx-metaeditor",20),w("metaChange",function(c){return _(o),C(t.deliveryRequest.meta,c)||(t.deliveryRequest.meta=c),g(c)}),r(),a(50,"button",21),s(51),m(52,"translate"),r(),s(53," \xA0 "),a(54,"button",22),E("click",function(){return _(o),g(t.back())}),s(55),m(56,"translate"),r()()()()()()}if(l&2){let o=S(5),f=S(34),c=S(44);n(3),d("nbSpinner",t.showProgress),n(3),d("ngIf",!t.editId),n(3),p(u(10,27,"DELIVERY.FIELDS.ASSIGNED.LABEL")),n(2),d("checked",t.deliveryRequest.assigned),n(2),d("ngForOf",t.deliveryError.assigned),n(3),p(u(17,29,"DELIVERY.FIELDS.IS_ONLINE.LABEL")),n(2),d("checked",t.deliveryRequest.is_online),n(2),d("ngForOf",t.deliveryError.is_online),n(3),p(u(24,31,"DELIVERY.FIELDS.IS_VERIFIED.LABEL")),n(2),d("checked",t.deliveryRequest.is_verified),n(2),d("ngIf",t.deliveryRequest.meta==null?null:t.deliveryRequest.meta.document_url),n(),d("ngForOf",t.deliveryError.is_verified),n(3),p(u(32,33,"DELIVERY.FIELDS.LATITUDE.LABEL")),n(2),I("ngModel",t.deliveryRequest.latitude),n(2),d("hidden",f.valid||f.pristine),n(),y(" ",u(37,35,"DELIVERY.FIELDS.LATITUDE.VALIDATION")," "),n(2),d("ngForOf",t.deliveryError.latitude),n(3),p(u(42,37,"DELIVERY.FIELDS.LONGITUDE.LABEL")),n(2),I("ngModel",t.deliveryRequest.longitude),n(2),d("hidden",c.valid||c.pristine),n(),y(" ",u(47,39,"DELIVERY.FIELDS.LONGITUDE.VALIDATION")," "),n(2),d("ngForOf",t.deliveryError.longitude),n(),I("meta",t.deliveryRequest.meta),n(),d("disabled",!o.form.valid||t.showProgressButton)("nbSpinner",t.showProgressButton),n(),y(" ",u(52,41,"COMMON.SAVE")," "),n(4),y(" ",u(56,43,"COMMON.BACK")," ")}},dependencies:[te,ie,de,re,pe,oe,ae,me,se,le,ue,N,V,q,B,ce,ve,F,A],encapsulation:2})}}return i})();var Oe=[{path:"",component:be,children:[{path:"add",component:Q},{path:"list",component:Ee},{path:"edit/:id",component:Q}]}],Se=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=D({type:i})}static{this.\u0275inj=x({imports:[G.forChild(Oe),G]})}}return i})();var ut=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=D({type:i})}static{this.\u0275inj=x({imports:[_e,Se]})}}return i})();export{ut as DeliveriesModule};
